# Скрипт для сортировки фотографий и видео

Этот скрипт предназначен для автоматической сортировки медиафайлов (фотографий и видео) по папкам. Имя каждой папки соответствует дате съемки файла.

## Функциональность

-   Обрабатывает файлы `.jpg`, `.jpeg`, `.mov`, `.mp4`, `.mkv`, `.avi`, `.mts`.
-   Извлекает дату съемки из метаданных EXIF для `.jpg` и `.jpeg` файлов.
-   Использует `ffprobe` (из пакета `ffmpeg`) для извлечения даты создания из видеофайлов.
-   Если дата съемки недоступна, используется дата последнего изменения файла.
-   Создает директории с именами в формате `YYYY-MM-DD`.
-   Перемещает каждый файл в соответствующую ему папку.
-   При обнаружении в целевой папке файла с таким же именем, сравнивает их по CRC32.
-   Если файлы идентичны, удаляет исходный файл-дубликат.
-   Если файлы разные, переименовывает и перемещает исходный файл.

## Установка и настройка

### 1. Установка зависимостей

#### FFmpeg
Скрипт требует наличия `ffmpeg` для обработки видеофайлов. Установите его с помощью менеджера пакетов вашей операционной системы.

**Для Debian/Ubuntu:**
```bash
sudo apt update
sudo apt install ffmpeg
```

**Для macOS (используя Homebrew):**
```bash
brew install ffmpeg
```

#### Python библиотеки
Все необходимые библиотеки перечислены в `requirements.txt`. Рекомендуется использовать виртуальное окружение.

```bash
# Создание и активация виртуального окружения
python3 -m venv .venv
source .venv/bin/activate

# Установка зависимостей из файла
pip install -r requirements.txt
```

### 2. Использование скрипта

Скрипт теперь поддерживает аргументы командной строки для указания исходной папки, папки для сохранения и рекурсивного обхода.

**Параметры:**

-   `-R`, `--recursive`: Включает рекурсивный обход исходной папки.
-   `--load=path`: Указывает путь к папке с исходными файлами (по умолчанию: текущая директория).
-   `--save=path`: Указывает путь к папке для сохранения отсортированных файлов (по умолчанию: внутри папки, указанной в `--load`).

**Примеры запуска:**

1.  **Сортировка файлов в текущей директории (без рекурсии):**
    ```bash
    python main.py
    ```

2.  **Сортировка файлов из указанной папки (без рекурсии):**
    ```bash
    python main.py --load=/path/to/your/photos
    ```

3.  **Рекурсивная сортировка файлов из указанной папки, сохранение в ту же папку:**
    ```bash
    python main.py -R --load=/path/to/your/photos
    ```

4.  **Рекурсивная сортировка файлов из указанной папки, сохранение в другую папку:**
    ```bash
    python main.py -R --load=/path/to/your/photos --save=/path/to/destination
    ```